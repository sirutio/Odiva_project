{% extends "index.html" %}

{% block style %}
<style>
    /* --- ë§ˆì´í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ --- */
    .mypage-wrapper {
        max-width: 1200px; /* ì „ì²´ ë„ˆë¹„ë¥¼ ì¢€ ë” ë„“ê²Œ (1000 -> 1200px) */
        margin: 0 auto;
        padding: 50px 20px 100px;
    }

    .page-header {
        margin-bottom: 40px;
        border-bottom: 2px solid #eee;
        padding-bottom: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .page-title {
        font-size: 32px; /* ì œëª© í¬ê¸° í™•ëŒ€ */
        font-weight: 700;
        color: #333;
    }

    /* --- í”„ë¡œí•„ ì„¹ì…˜ --- */
    .profile-card {
        background: #fff;
        border: 1px solid #e5e7eb;
        border-radius: 24px; /* ë” ë‘¥ê¸€ê²Œ */
        padding: 36px; /* íŒ¨ë”© í™•ëŒ€ */
        box-shadow: 0 4px 12px rgba(0,0,0,0.03);
        display: flex;
        align-items: center;
        gap: 30px;
        margin-bottom: 60px; /* ê°„ê²© í™•ëŒ€ */
    }

    .profile-icon {
        width: 100px; /* ì•„ì´ì½˜ í¬ê¸° í™•ëŒ€ */
        height: 100px;
        background-color: var(--ewha-green);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 40px; /* ì´ëª¨ì§€ í¬ê¸° í™•ëŒ€ */
        color: white;
    }

    .profile-info {
        flex: 1;
    }

    .profile-nickname {
        font-size: 26px; /* ë‹‰ë„¤ì„ í™•ëŒ€ */
        font-weight: 700;
        margin-bottom: 8px;
    }

    .profile-id {
        color: #666;
        font-size: 16px; /* ì•„ì´ë”” ì •ë³´ í™•ëŒ€ */
    }

    .btn-logout {
        padding: 12px 24px; /* ë²„íŠ¼ í¬ê¸° í™•ëŒ€ */
        border: 1px solid #ddd;
        background: #fff;
        border-radius: 999px;
        color: #555;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
    }

    .btn-logout:hover {
        background: #f1f1f1;
        border-color: #ccc;
    }

    /* --- ë‚´ íŒë§¤ ë‚´ì—­ ì„¹ì…˜ (ì¹´ë“œ í¬ê¸° UP) --- */
    .section-title {
        font-size: 24px; /* ì„¹ì…˜ ì œëª© í™•ëŒ€ */
        font-weight: 700;
        margin-bottom: 24px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .count-badge {
        background: var(--ewha-green);
        color: white;
        font-size: 14px;
        padding: 4px 10px;
        border-radius: 12px;
        vertical-align: middle;
    }

    /* ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ ìˆ˜ì • */
    .item-grid {
        display: grid;
        /* [ìˆ˜ì •] í•œ ì¤„ì— 4ê°œ -> 3ê°œë¡œ ë³€ê²½í•˜ì—¬ ë„ˆë¹„ í™•ë³´ */
        grid-template-columns: repeat(3, 1fr);
        gap: 30px; /* ê°„ê²© í™•ëŒ€ */
    }

    .item-card {
        background: #fff;
        border: 1px solid #eee;
        border-radius: 20px; /* ë‘¥ê¸€ê¸° í™•ëŒ€ */
        overflow: hidden;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .item-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 24px rgba(0,0,0,0.1);
    }

    .item-thumb {
        width: 100%;
        /* [ìˆ˜ì •] ì´ë¯¸ì§€ ë†’ì´ ëŒ€í­ í™•ëŒ€ (180px -> 260px) */
        height: 260px; 
        background: #f8f8f8;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
    }
    
    .item-thumb img {
        width: 100%;
        height: 100%;
        object-fit: cover; /* ì´ë¯¸ì§€ê°€ ê½‰ ì°¨ê²Œ */
    }

    .item-info {
        padding: 20px; /* íŒ¨ë”© í™•ëŒ€ */
    }

    .item-name {
        /* [ìˆ˜ì •] ìƒí’ˆëª… ê¸€ì”¨ í™•ëŒ€ (15px -> 18px) */
        font-size: 18px;
        font-weight: 700;
        margin-bottom: 8px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .item-meta {
        /* [ìˆ˜ì •] ì •ë³´ ê¸€ì”¨ í™•ëŒ€ (13px -> 15px) */
        font-size: 15px;
        color: #777;
    }

    /* ë°˜ì‘í˜• */
    @media (max-width: 992px) {
        /* í™”ë©´ì´ ì¢ì•„ì§€ë©´ 2ê°œì”© ë°°ì¹˜ */
        .item-grid { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 768px) {
        .profile-card { flex-direction: column; text-align: center; }
        .profile-info { margin-bottom: 15px; }
    }
    @media (max-width: 576px) {
         /* ëª¨ë°”ì¼ì—ì„œëŠ” 1ê°œì”© í¬ê²Œ ë°°ì¹˜ */
        .item-grid { grid-template-columns: 1fr; }
    }
</style>
{% endblock style %}

{% block section %}
<div class="mypage-wrapper">
    
    <div class="page-header">
        <div class="page-title">ë§ˆì´í˜ì´ì§€</div>
    </div>

    <div class="profile-card">
        <div class="profile-icon">
            <i class="fa-regular fa-user"></i> ğŸ˜
        </div>
        <div class="profile-info">
            <div class="profile-nickname">
                {{ user_info.nickname }}ë‹˜, ì•ˆë…•í•˜ì„¸ìš”!
            </div>
            <div class="profile-id">
                ì•„ì´ë””: {{ user_info.id }} | ì´ë©”ì¼: 
                {% if user_info.email %}
                    {{ user_info.email }}
                {% else %}
                    <span style="color: #999;">ë“±ë¡ ì•ˆë¨</span>
                {% endif %}
            </div>
        </div>
        <a href="/logout" class="btn-logout">ë¡œê·¸ì•„ì›ƒ</a>
    </div>

    <div>
        <div class="section-title">
            ë‚´ê°€ ë“±ë¡í•œ ìƒí’ˆ 
            <span class="count-badge">{{ my_items|length }}</span>
        </div>

        {% if my_items %}
        <div class="item-grid">
            {% for name, item in my_items.items() %}
            <div class="item-card" onclick="location.href='/view_detail/{{ name }}/';">
                <div class="item-thumb">
                    {% if item.img_path %}
                        <img src="{{ url_for('static', filename='images/' + item.img_path) }}" alt="{{ name }}">
                    {% else %}
                        <span style="color:#ccc; font-size:12px;">ì´ë¯¸ì§€ ì—†ìŒ</span>
                    {% endif %}
                </div>
                <div class="item-info">
                    <div class="item-name">{{ name }}</div>
                    <div class="item-meta">
                        {{ item.addr }}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
            <div style="text-align: center; padding: 60px 0; color: #888;">
                <p>ì•„ì§ ë“±ë¡í•œ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>
                <a href="/reg_items" style="color:var(--ewha-green); font-weight:600; font-size:14px;">ìƒí’ˆ ë“±ë¡í•˜ëŸ¬ ê°€ê¸° &gt;</a>
            </div>
        {% endif %}
    </div>

</div>
{% endblock section %}